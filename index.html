<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./css/main.css" />
    <style>
        /* Font Face for Custom Font */
        @font-face {
            font-family: 'Eurostile Extd Black';
            src: url('./font/EurostileExtdBlack.otf') format('opentype');
            font-weight: normal;
            font-style: normal;
        }

        /* Root Variables for Colors and Fonts */
        :root {
            --primary-color: #4CAF50;
            --secondary-color: #FFFFFF;
            --background-color: #000000;
            --font-family: 'Eurostile Extd Black', sans-serif;
        }

        /* Body Styling */
        body {
            margin: 0;
            font-family: var(--font-family);
            font-size: 18px;
            background-color: #000000;
            color: var(--secondary-color);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }

        /* Main Container Styling */
        .main-container {
            width: 80%;
            max-width: 800px;
            background-color: rgb(0, 0, 0,);
            padding: 20px;
            margin: 0 auto;
            box-sizing: border-box;
            border-radius: 8px;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        /* Centering Card Type */
        .input-field {
            display: flex;
            align-items: center;
            gap: 10px;
            justify-content: center; /* Center contents */
        }

        /* Two-column form layout with max-width for each column */
        .form-section {
            display: flex;
            gap: 20px;
            justify-content: center;
        }

        .column {
            max-width: 320px; /* About 5 inches */
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        /* Row styling for Stats */
        .row {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            max-width: 640px; /* About 10 inches */
            margin: 0 auto;
            justify-content: space-between;
        }

        /* Input and label styling */
        label {
            font-weight: bold;
            width: 100px; /* Align labels uniformly */
            margin-right: 10px;
            text-align: right;
        }

        .input-field {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        input[type="text"], input[type="number"], select, textarea {
            background-color: #FFFFFF;
            color: #000000;
            border: 1px solid #CCCCCC;
            padding: 5px;
            border-radius: 4px;
            width: 150%; /* Make them 50% wider */
            max-width: 100%;
        }

        /* Centered dropdown styling */
        select {
            width: 200px; /* Set a specific width for the dropdown */
        }

        /* Increase height of Ability and Flavor text boxes */
        #ability, #flavor {
            height: 60px; /* Previous size */
        }

        /* Button Styling */
        button {
            padding: 12px 25px; /* Adjust padding for buttons */
            border-radius: 5px;
            font-weight: bold;
            background-color: var(--primary-color);
            color: var(--background-color);
            cursor: pointer;
            transition: background-color 0.3s;
            border: 1px solid #FFFFFF; /* Add white border to buttons */
            font-family: var(--font-family); /* Same font as rest */
            font-size: 22px; /* Increase font size for buttons */
        }

        button:hover {
            background-color: var(--secondary-color);
        }

        /* Unique, Legendary, Loyal styling */
        .checkbox-row {
            display: flex;
            justify-content: space-between;
            gap: 20px; /* Space between items */
        }

        /* Additional spacing for legendary checkbox */
        #legendary-field {
            margin-left: 40px; /* Increased space before the checkbox */
        }

        /* Checkbox for Elements */
        #elements {
            display: flex;
            align-items: center; /* Align elements vertically centered */
            gap: 20px; /* Uniform space between element labels and checkboxes */
        }

        /* Responsive layout for mobile */
        @media (max-width: 768px) {
            .form-section {
                flex-direction: column;
            }

            .row {
                flex-direction: column;
                align-items: center;
            }

            label {
                text-align: left;
                width: auto;
            }

            .column, .row {
                max-width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="main-container">
        <canvas id="canvas" width="500" height="700" style="display: block; margin: auto;"></canvas>
        <div class="input-field">
            <label for="type">Card Type</label>
            <select id="type" name="type" onchange="updateFields()">
                <option value="" disabled selected>Choose Type</option>
                <option value="attack">Attack</option>
                <option value="battlegear">Battlegear</option>
                <option value="creature">Creature</option>
                <option value="location">Location</option>
                <option value="mugic">Mugic</option>
            </select>
        </div>

        <div class="form-section">
            <!-- Column 1 -->
            <div class="column">
                <div class="input-field" id="tribe-field">
                    <label for="tribe">Tribe</label>
                    <select id="tribe" name="tribe">
                        <option value="tribeless">Tribeless</option>
                        <option value="overworld">OverWorld</option>
                        <option value="underworld">UnderWorld</option>
                        <option value="mipedian">Mipedian</option>
                        <option value="danian">Danian</option>
                        <option value="m'arrillian">M'arrillian</option>
                    </select>
                </div>
                <div class="input-field" id="name-field">
                    <label for="name">Name</label>
                    <input id="name" name="name" type="text">
                </div>
                <div class="input-field" id="subname-field">
                    <label for="subname">Subname</label>
                    <input id="subname" name="subname" type="text">
                </div>
                <div class="input-field" id="set-field">
                    <label for="set">Set</label>
                    <select id="set" name="set">
                        <option value="">None</option>
                        <option value="dop">Dawn Of Perim</option>
                        <option value="zoth">Zenith of the Hive</option>
                        <option value="btd">M'arrillian Invasion</option>
                        <option value="roto">Rise of the Oligarch</option>
                        <option value="tott">Turn of the Tide</option>
                        <option value="fun">Forged Unity</option>
                        <option value="au">Alliances Unraveled</option>
                        <option value="fas">Fire and Stone</option>
                    </select>
                </div>
                <div class="input-field" id="rarity-field">
                    <label for="rarity">Rarity</label>
                    <select id="rarity" name="rarity">
                        <option value="common">Common</option>
                        <option value="uncommon">Uncommon</option>
                        <option value="rare">Rare</option>
                        <option value="super rare">Super Rare</option>
                        <option value="ultra rare">Ultra Rare</option>
                        <option value="promo">Promo</option>
                    </select>
                </div>
                <div class="input-field" id="subtype-field">
                    <label for="subtype">Subtype</label>
                    <input id="subtype" name="subtype" type="text">
                </div>
            </div>

            <!-- Column 2 -->
            <div class="column">
                <div class="input-field" id="ability-field">
                    <label for="ability">Ability</label>
                    <textarea id="ability" name="ability"></textarea>
                </div>
                <div class="input-field" id="flavor-field">
                    <label for="flavor">Flavor</label>
                    <textarea id="flavor" name="flavor"></textarea>
                </div>
                <div class="input-field" id="artist-field">
                    <label for="artist">Artist</label>
                    <input id="artist" name="artist" type="text">
                </div>
                <div class="input-field" id="art-field">
                    <label for="art">Art</label>
                    <input id="art" type="file" accept="image/*">
                </div>
            </div>
        </div>
<!-- Unique, Legendary, Loyal -->
        <div class="row checkbox-row">
            <div class="input-field" id="unique-field">
                <label for="unique">Unique</label>
                <input type="checkbox" id="unique" name="unique" value="true">
            </div>
            <div class="input-field" id="legendary-field">
                <label for="legendary">Legendary</label>
                <input type="checkbox" id="legendary" name="legendary" value="true">
            </div>
            <div class="input-field" id="loyal-field">
                <label for="loyal">Loyal</label>
                <input type="checkbox" id="loyal" name="loyal" value="true">
                <input type="text" id="loyal_restrict" name="loyal_restrict">
            </div>
        </div>

        <!-- Elements -->
        <div class="input-field" id="elements">
            <label for="fire">Fire</label>
            <input type="checkbox" id="fire" name="fire" value="true">
            <label for="air">Air</label>
            <input type="checkbox" id="air" name="air" value="true">
            <label for="earth">Earth</label>
            <input type="checkbox" id="earth" name="earth" value="true">
            <label for="water">Water</label>
            <input type="checkbox" id="water" name="water" value="true">
        </div>

        <!-- Stats -->
        <div class="row" id="stats-container">
            <div class="number-slider">
                <label for="energy">Energy</label>
                <div class="slider-container">
                    <input type="range" class="slider-input" id="energy-slider" min="0" max="220" step="5" value="0" data-type="stats">
                    <div class="slider-ticks" id="energy-ticks"></div>
                </div>
                <input type="number" id="energy" name="energy" class="number-input" min="0" max="220" value="0">
            </div>

            <div class="number-slider">
                <label for="courage">Courage</label>
                <div class="slider-container">
                    <input type="range" class="slider-input" id="courage-slider" min="0" max="220" step="5" value="0" data-type="stats">
                    <div class="slider-ticks" id="courage-ticks"></div>
                </div>
                <input type="number" id="courage" name="courage" class="number-input" min="0" max="220" value="0">
            </div>

            <div class="number-slider">
                <label for="power">Power</label>
                <div class="slider-container">
                    <input type="range" class="slider-input" id="power-slider" min="0" max="220" step="5" value="0" data-type="stats">
                    <div class="slider-ticks" id="power-ticks"></div>
                </div>
                <input type="number" id="power" name="power" class="number-input" min="0" max="220" value="0">
            </div>

            <div class="number-slider">
                <label for="wisdom">Wisdom</label>
                <div class="slider-container">
                    <input type="range" class="slider-input" id="wisdom-slider" min="0" max="220" step="5" value="0" data-type="stats">
                    <div class="slider-ticks" id="wisdom-ticks"></div>
                </div>
                <input type="number" id="wisdom" name="wisdom" class="number-input" min="0" max="220" value="0">
            </div>

            <div class="number-slider">
                <label for="speed">Speed</label>
                <div class="slider-container">
                    <input type="range" class="slider-input" id="speed-slider" min="0" max="220" step="5" value="0" data-type="stats">
                    <div class="slider-ticks" id="speed-ticks"></div>
                </div>
                <input type="number" id="speed" name="speed" class="number-input" min="0" max="220" value="0">
            </div>

            <div class="number-slider">
                <label for="mc">Mugic</label>
                <div class="slider-container">
                    <input type="range" class="slider-input" id="mc-slider" min="0" max="5" step="1" value="0" data-type="small">
                    <div class="slider-ticks" id="mc-ticks"></div>
                </div>
                <input type="number" id="mc" name="mc" class="number-input" min="0" max="5" value="0">
            </div>
        </div>

        <div style="text-align: center; margin-top: 20px;">
            <button id="update" onclick="submit();">Update</button>
            <button id="download" download="" href="" onclick="download_img(this);">Download</button>
        </div>
    </div>
<script type="module">
    import { download, submit } from './js/index.js';
    window.download_img = download;
    window.submit = submit;

    function updateFields() {
        const type = document.getElementById('type').value;
        const allFields = document.querySelectorAll('.input-field, .number-slider');
        allFields.forEach(field => field.style.display = 'none');

        const typeFields = {
            attack: ['art-field', 'name-field', 'set-field', 'rarity-field', 'subtype-field', 'unique-field', 'ability-field', 'artist-field', 'elements'],
            battlegear: ['art-field', 'name-field', 'set-field', 'rarity-field', 'subtype-field', 'unique-field', 'legendary-field', 'ability-field', 'artist-field'],
            creature: ['art-field', 'name-field', 'subname-field', 'set-field', 'rarity-field', 'subtype-field', 'unique-field', 'legendary-field', 'loyal-field', 'ability-field', 'flavor-field', 'artist-field', 'tribe-field', 'elements', 'energy-slider', 'courage-slider', 'power-slider', 'wisdom-slider', 'speed-slider', 'mc-slider'],
            location: ['art-field', 'name-field', 'subname-field', 'set-field', 'rarity-field', 'subtype-field', 'ability-field', 'flavor-field', 'artist-field'],
            mugic: ['art-field', 'name-field', 'subname-field', 'set-field', 'rarity-field', 'subtype-field', 'unique-field', 'ability-field', 'flavor-field', 'artist-field', 'tribe-field', 'mc-slider']
        };

        if (typeFields[type]) {
            typeFields[type].forEach(id => {
                const element = document.getElementById(id);
                if (element) {
                    element.style.display = element.classList.contains('number-slider') ? 'flex' : 'flex';
                }
            });
        }
    }

    // Initialize sliders
    document.addEventListener('DOMContentLoaded', () => {
        const sliders = [
            { id: 'energy', type: 'stats' },
            { id: 'courage', type: 'stats' },
            { id: 'power', type: 'stats' },
            { id: 'wisdom', type: 'stats' },
            { id: 'speed', type: 'stats' },
            { id: 'mc', type: 'small' }
        ];

        sliders.forEach(({ id, type }) => {
            setupSlider(`${id}-slider`, id, type);
        });
    });

    function setupSlider(sliderId, inputId, type) {
        const slider = document.getElementById(sliderId);
        const input = document.getElementById(inputId);
        const ticksContainer = document.getElementById(`${sliderId}-ticks`);
        
        let ticks;
        switch(type) {
            case 'stats':
                ticks = [0, 55, 110, 165, 220];
                break;
            case 'elements':
                ticks = [0, 10, 25, 35, 50];
                break;
            case 'small':
                ticks = [0, 1, 2, 3, 4, 5];
                break;
        }
        
        // Create ticks
        ticksContainer.innerHTML = '';
        ticks.forEach(value => {
            const tick = document.createElement('div');
            tick.className = 'tick';
            tick.style.left = `${(value / slider.max) * 100}%`;
            
            const mark = document.createElement('div');
            mark.className = 'tick-mark';
            
            const label = document.createElement('div');
            label.className = 'tick-label';
            label.textContent = value;
            
            tick.appendChild(mark);
            tick.appendChild(label);
            ticksContainer.appendChild(tick);
        });
        
        function getClosestMultipleOf5(num) {
            return Math.round(num / 5) * 5;
        }
        
        slider.addEventListener('input', (e) => {
            const value = type === 'small' ? parseInt(e.target.value) : getClosestMultipleOf5(parseInt(e.target.value));
            input.value = value;
        });
        
        input.addEventListener('input', (e) => {
            let value = parseInt(e.target.value) || 0;
            if (value > slider.max) value = slider.max;
            if (value < slider.min) value = slider.min;
            slider.value = value;
        });
        
        input.addEventListener('blur', (e) => {
            let value = parseInt(e.target.value) || 0;
            if (value > slider.max) value = slider.max;
            if (value < slider.min) value = slider.min;
            if (type !== 'small') {
                value = getClosestMultipleOf5(value);
            }
            input.value = value;
            slider.value = value;
        });
    }

    window.updateFields = updateFields;
</script>
</body>
</html>